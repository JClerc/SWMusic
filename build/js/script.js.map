{"version":3,"sources":["script.js","app.js","audio.js","canvas.polyfill.js","selector.js","episode1.js","hyperspace.js","navigation.js","selection.js","vote.js","main.js"],"names":["App","identifier","gotoUp","current","$","next","direction","Error","currentName","getAttribute","call","classList","remove","add","addEventListener","animationend","e","removeEventListener","setLocation","home","window","location","reload","isChangingHash","hash","setTimeout","gotoHash","homeFallback","length","substring","page","contains","HYPERSPACE","callbacks","state","i","bind","callback","push","AudioContext","webkitAudioContext","mozAudioContext","lastTime","vendors","x","requestAnimationFrame","cancelAnimationFrame","element","currTime","Date","getTime","timeToCall","Math","max","id","clearTimeout","document","querySelector","$$","querySelectorAll","episodeIsPlaying","canvas","getContext","width","innerWidth","height","innerHeight","audioContext","sourceNode","analyserNode","javascriptNode","amplitudeArray","context","frequency","angleCount","audioData","audioPlaying","sampleSize","audioUrl","middleHeight","lastDraw","setupAudioNodes","createBufferSource","createAnalyser","createScriptProcessor","Uint8Array","frequencyBinCount","connect","destination","loadSound","url","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","buffer","playSound","onError","send","start","loop","console","warn","strokeStyle","shadowBlur","shadowColor","drawSoung","clearCanvas","lineWidth","random","k","value","amplitudeLength","countOffset","drawOffset","beginPath","moveTo","lineTo","stroke","clearRect","ex","now","getByteTimeDomainData","stop","GLOBAL_SPEED","HYPERSPACE_RUN","interval","setInterval","clearInterval","select","starsCount","stars","createStar","randomX","randomY","color","y","xs","ys","size","s","lineCap","begin","bindNavigation","this","preventDefault","elements","lastMove","leftOffset","screen","rightOffset","screenScale","selectCards","percentDivisor","toggleSelectionListener","event","percent","screenX","style","transform","buttons","bindVote","elt","innerHTML","log"],"mappings":"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","file":"script.js","sourcesContent":["'use strict';\n\n/**\n * Create App object\n *\n */\n\nvar App = {};\n\n(function () {\n\n    App.goto = function (identifier, gotoUp) {\n        var current = $('section.visible'),\n            next = $('.page.' + identifier),\n            direction = gotoUp ? 'up' : 'down';\n\n        if (!next || typeof gotoUp !== 'boolean') {\n            throw new Error('Wrong arguments: ' + next + ', ' + gotoUp);\n        } else if (current == next) {\n            throw new Error('Moving to the same page..');\n        } else {\n            if (current) {\n                var currentName = current.getAttribute('data-page');\n                App.call(currentName, 'unloading');\n                current.classList.remove('visible');\n                current.classList.add('exit-' + direction);\n                current.addEventListener('animationend', function animationend(e) {\n                    App.call(currentName, 'unloaded');\n                    current.removeEventListener('animationend', animationend);\n                    current.classList.remove('exit-' + direction);\n                });\n            }\n            App.call(identifier, 'loading');\n            next.classList.add('visible');\n            next.classList.add('enter-' + direction);\n            next.addEventListener('animationend', function animationend(e) {\n                App.call(identifier, 'loaded');\n                next.removeEventListener('animationend', animationend);\n                next.classList.remove('enter-' + direction);\n                App.setLocation(identifier);\n            });\n        }\n    };\n\n    App.home = function () {\n        // Rerun the page to restart the canvas\n        window.location.reload();\n    };\n\n    var isChangingHash = false;\n\n    App.setLocation = function (hash) {\n        isChangingHash = true;\n        window.location.hash = '#/' + hash;\n        setTimeout(function () {\n            isChangingHash = false;\n        }, 1);\n    };\n\n    App.gotoHash = function (homeFallback) {\n        if (isChangingHash) return;\n        if (window.location.hash && window.location.hash.length > 2) {\n            var hash = window.location.hash.substring(2),\n                page = $('.page.' + hash);\n\n            if (hash === 'home') {\n                App.home();\n                return;\n            } else if (page && page.classList.contains('page')) {\n                var current = $('section.visible');\n                if (current) {\n                    current.classList.remove('visible');\n                    var currentName = current.getAttribute('data-page');\n                    App.call(currentName, 'unloading');\n                    App.call(currentName, 'unloaded');\n                }\n                page.classList.add('visible');\n                App.call(hash, 'loading');\n                App.call(hash, 'loaded');\n                window.HYPERSPACE = false;\n                return;\n            }\n        }\n        if (homeFallback) {\n            App.home();\n        }\n    };\n\n    var callbacks = {};\n\n    App.call = function (page, state) {\n        if (callbacks[page] && callbacks[page][state]) {\n            for (var i = callbacks[page][state].length - 1; i >= 0; i--) {\n                callbacks[page][state][i]();\n            }\n        }\n    };\n\n    App.bind = function (page, state, callback) {\n        if (!callbacks[page]) {\n            callbacks[page] = {};\n        }\n        if (!callbacks[page][state]) {\n            callbacks[page][state] = [];\n        }\n        callbacks[page][state].push(callback);\n    };\n})();\n\"use strict\";\n\nwindow.AudioContext = (function () {\n    return window.AudioContext || window.webkitAudioContext || window.mozAudioContext;\n})();\n'use strict';\n\n/* Compatible avec tous les navigateurs */\n(function () {\n    var lastTime = 0;\n    var vendors = ['webkit', 'moz'];\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback, element) {\n        var currTime = new Date().getTime();\n        var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n        var id = window.setTimeout(function () {\n            callback(currTime + timeToCall);\n        }, timeToCall);\n        lastTime = currTime + timeToCall;\n        return id;\n    };\n\n    if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {\n        clearTimeout(id);\n    };\n})();\n\"use strict\";\n\nvar $ = document.querySelector.bind(document),\n    $$ = document.querySelectorAll.bind(document);\n'use strict';\n\n(function () {\n\n    var episodeIsPlaying = false;\n\n    var canvas = $('.episode-1 .drawing canvas');\n\n    if (!canvas || !canvas.getContext) return;\n\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n    var context = canvas.getContext('2d'),\n        width = canvas.width,\n        height = canvas.height;\n\n    var frequency = 40,\n        angleCount = 30;\n\n    // Tutorial from: http://apprentice.craic.com/tutorials/30\n\n    var audioContext;\n    var audioBuffer;\n    var sourceNode;\n    var analyserNode;\n    var javascriptNode;\n    var audioData = null;\n    var audioPlaying = false;\n    var sampleSize = 1024;\n    var amplitudeArray;\n    var audioUrl = 'audio/episode1.mp3';\n    var middleWidth = ~ ~(width / 2);\n    var middleHeight = ~ ~(height / 2);\n    var lastDraw = 0;\n\n    var setupAudioNodes = function setupAudioNodes() {\n        sourceNode = audioContext.createBufferSource();\n        analyserNode = audioContext.createAnalyser();\n        javascriptNode = audioContext.createScriptProcessor(sampleSize, 1, 1);\n        // Create the array for the data values\n        amplitudeArray = new Uint8Array(analyserNode.frequencyBinCount);\n        // Now connect the nodes together\n        sourceNode.connect(audioContext.destination);\n        sourceNode.connect(analyserNode);\n        analyserNode.connect(javascriptNode);\n        javascriptNode.connect(audioContext.destination);\n    };\n\n    // Load the audio from the URL via Ajax and store it in global variable audioData\n    // Note that the audio load is asynchronous\n    var loadSound = function loadSound(url) {\n        var request = new XMLHttpRequest();\n        request.open('GET', url, true);\n        request.responseType = 'arraybuffer';\n        // When loaded, decode the data and play the sound\n        request.onload = function () {\n            audioContext.decodeAudioData(request.response, function (buffer) {\n                audioData = buffer;\n                playSound(audioData);\n            }, onError);\n        };\n        request.send();\n    };\n\n    // Play the audio and loop until stopped\n    var playSound = function playSound(buffer) {\n        sourceNode.buffer = buffer;\n        // sourceNode.start();    // Play the sound now\n        sourceNode.start(0, 38);\n        sourceNode.loop = true;\n        audioPlaying = true;\n    };\n\n    var onError = function onError(e) {\n        console.warn(e);\n    };\n\n    context.strokeStyle = 'white';\n    context.shadowBlur = 100;\n    context.shadowColor = 'rgb(220, 20, 220)';\n    // context.shadowColor = 'blue';\n\n    var drawSoung = function drawSoung() {\n        if (episodeIsPlaying) {\n            clearCanvas();\n            context.lineWidth = ~ ~(4 + Math.random() * 8);\n\n            var k,\n                i,\n                value = 0;\n            var amplitudeLength = amplitudeArray.length;\n            var countOffset = ~ ~(amplitudeLength / angleCount);\n            var drawOffset = ~ ~(width / angleCount);\n\n            context.beginPath();\n            context.moveTo(0, middleHeight);\n            k = 0;\n            for (i = countOffset; i < amplitudeLength - countOffset; i += countOffset) {\n                k++;\n                value = height - height * amplitudeArray[i] / 256 - 1;\n                context.lineTo(k * drawOffset, value);\n            }\n            context.lineTo(width, middleHeight);\n            context.stroke();\n\n            context.beginPath();\n            context.moveTo(0, middleHeight);\n            k = 0;\n            for (i = amplitudeLength - countOffset; i >= countOffset; i -= countOffset) {\n                k++;\n                value = height - height * amplitudeArray[i] / 256 - 1;\n                context.lineTo(k * drawOffset, value);\n            }\n            context.lineTo(width, middleHeight);\n            context.stroke();\n\n            context.beginPath();\n            context.moveTo(0, middleHeight);\n            k = 0;\n            for (i = amplitudeLength - countOffset; i >= countOffset; i -= countOffset) {\n                k++;\n                context.lineTo(k * drawOffset, Math.random() * 50 - 25 + middleHeight);\n            }\n            context.lineTo(width, middleHeight);\n            context.stroke();\n\n            // episodeIsPlaying = false;\n\n            // var length = amplitudeArray.length * 0.95,\n            // start = ~~(length * 0.05);\n            // context.beginPath();\n            // var value, i, y;\n            // context.moveTo(0, middleHeight);\n            // for (i = start; i < length; i += 60) {\n            // i = ~~i;\n            // value = amplitudeArray[i] / 256;\n            // y = height - (height * value) - 1;\n            // context.lineTo(i - start, y);\n            // }\n            // context.lineTo(width, middleHeight);\n            // context.stroke();\n        }\n    };\n\n    var clearCanvas = function clearCanvas() {\n        context.clearRect(0, 0, width, height);\n    };\n\n    try {\n        audioContext = new AudioContext();\n    } catch (ex) {\n        console.warn('Web Audio API is not supported in this browser');\n    }\n\n    App.bind('episode-1', 'loaded', function (e) {\n        episodeIsPlaying = true;\n\n        setupAudioNodes();\n\n        // setup the event handler that is triggered every time enough samples have been collected\n        // trigger the audio analysis and draw the results\n        javascriptNode.addEventListener('audioprocess', function (e) {\n            var now = new Date().getTime();\n            if (lastDraw > now - frequency) return;\n            lastDraw = now;\n            // get the Time Domain data for this sample\n            analyserNode.getByteTimeDomainData(amplitudeArray);\n            // analyserNode.getByteFrequencyData(amplitudeArray);\n\n            // draw the display if the audio is playing\n            if (audioPlaying === true) {\n                window.requestAnimationFrame(drawSoung);\n            }\n        });\n\n        // Load the Audio the first time through, otherwise play it from the buffer\n        if (audioData === null) {\n            loadSound(audioUrl);\n        } else {\n            playSound(audioData);\n        }\n    });\n\n    App.bind('episode-1', 'unloading', function () {\n        episodeIsPlaying = false;\n        sourceNode.stop(0);\n        clearCanvas();\n        audioPlaying = false;\n    });\n})();\n'use strict';\n\n(function () {\n\n    var GLOBAL_SPEED = 0.1,\n        HYPERSPACE_RUN = true;\n\n    App.bind('home', 'unloading', function () {\n        var interval = setInterval(function () {\n            GLOBAL_SPEED = (GLOBAL_SPEED + 0.1) * 1.3;\n            if (GLOBAL_SPEED > 70) {\n                clearInterval(interval);\n            }\n        }, 100);\n\n        var home = $('.page.home'),\n            select = $('.page.select');\n\n        // select.addEventListener('animationend', function begin(e) {\n        //     select.removeEventListener('animationend', begin);\n        // });\n\n        home.classList.add('exit-hyperspace');\n        select.classList.add('enter-hyperspace');\n    });\n\n    App.bind('home', 'unloaded', function () {\n        HYPERSPACE_RUN = false;\n\n        var home = $('.page.home'),\n            select = $('.page.select');\n\n        home.classList.remove('visible');\n        home.classList.remove('exit-hyperspace');\n        select.classList.remove('enter-hyperspace');\n    });\n\n    (function (canvas) {\n\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n\n        if (canvas.getContext) {\n            var context = canvas.getContext('2d'),\n                width = canvas.width,\n                height = canvas.height,\n                starsCount = 100,\n                centerRadius = 100,\n                length = 10,\n                stars = [];\n\n            var createStar = function createStar() {\n                var randomX = Math.random(),\n                    randomY = Math.random(),\n                    color = ~ ~(Math.random() * 80 + 20);\n\n                return {\n                    x: randomX * width,\n                    y: randomY * height,\n                    xs: (randomX * width - width / 2) / 500,\n                    ys: (randomY * height - height / 2) / 500,\n                    size: ~ ~(color / 20),\n                    length: Math.random() * length,\n                    color: 'rgb(' + color + ', ' + color + ', ' + ~ ~(color + Math.random() * 20) + ')'\n                };\n            };\n\n            for (var i = 0; i < starsCount; i++) {\n                stars.push(createStar());\n            }\n\n            (function loop() {\n                if (HYPERSPACE_RUN) {\n\n                    window.requestAnimationFrame(loop);\n                    context.clearRect(0, 0, width, height);\n\n                    for (var i = 0; i < starsCount; i++) {\n                        var s = stars[i];\n                        if (s.x < 0 || s.y < 0 || s.x > width || s.y > height) {\n                            s = stars[i] = createStar();\n                        }\n                        context.strokeStyle = s.color;\n                        context.lineWidth = s.size;\n                        context.shadowBlur = 5;\n                        context.lineCap = 'round';\n                        context.shadowColor = \"#555\";\n                        context.beginPath();\n                        context.moveTo(s.x, s.y);\n                        context.lineTo(s.x + 0.1 + s.length * s.xs * GLOBAL_SPEED, s.y + s.length * s.ys * GLOBAL_SPEED);\n                        context.stroke();\n                        s.x += s.xs * GLOBAL_SPEED;\n                        s.y += s.ys * GLOBAL_SPEED;\n                    }\n                }\n            })();\n        }\n    })($('.hyperspace'));\n})();\n'use strict';\n\n/**\n * Navigation between pages\n *\n */\n\n// Bind begin button to hyperspace animation\n$('.begin').addEventListener('click', function (e) {\n    App.call('home', 'unloading');\n    App.call('select', 'loading');\n    var select = $('.page.select');\n    select.addEventListener('animationend', function begin(e) {\n        select.removeEventListener('animationend', begin);\n        App.call('home', 'unloaded');\n        App.call('select', 'loaded');\n        $('.page.select').classList.add('visible');\n        App.setLocation('select');\n    });\n});\n\n// Bind navigation elements to animations\nvar bindNavigation = function bindNavigation(element) {\n    element.addEventListener('click', function (e) {\n        App.goto(this.getAttribute('data-target'), this.getAttribute('data-direction') === 'up');\n        e.preventDefault();\n    });\n};\n\nvar elements = $$('.navigation');\nfor (var i = elements.length - 1; i >= 0; i--) {\n    bindNavigation(elements[i]);\n}\n\n// Change page if hash change\nwindow.addEventListener('hashchange', App.gotoHash);\n\n// If a hash is already set\nApp.gotoHash(false);\n'use strict';\n\n(function () {\n\n    var select = {\n        lastMove: 0,\n        leftOffset: window.screen.width / 2 - 100,\n        rightOffset: 0,\n        screenScale: 100 - 100 / 1.75,\n        selectCards: $('.select .cards')\n    };\n\n    select.percentDivisor = window.screen.width - select.rightOffset - select.leftOffset;\n\n    var toggleSelectionListener = function toggleSelectionListener(event) {\n        var now = new Date().getTime();\n        if (select.lastMove < now - 20) {\n\n            select.lastMove = now;\n            var percent = (event.screenX - select.leftOffset) / select.percentDivisor;\n\n            if (percent < 0) {\n                percent = 0;\n            } else if (percent > 1) {\n                percent = 1;\n            }\n\n            select.selectCards.style.transform = 'translateZ(0) translateX(-' + percent * select.screenScale + '%)';\n        }\n    };\n\n    App.bind('select', 'loading', function () {\n        document.addEventListener('mousemove', toggleSelectionListener);\n    });\n\n    App.bind('select', 'unloading', function () {\n        document.removeEventListener('mousemove', toggleSelectionListener);\n    });\n})();\n'use strict';\n\n(function () {\n\n    var buttons = $$('.button-vote');\n    var bindVote = function bindVote(elt) {\n        elt.addEventListener('click', function (e) {\n            for (var i = buttons.length - 1; i >= 0; i--) {\n                buttons[i].innerHTML = \"Je vote\";\n            }\n            elt.innerHTML = \"Vote validé !\";\n        });\n    };\n\n    for (var i = buttons.length - 1; i >= 0; i--) {\n        bindVote(buttons[i]);\n    }\n})();\n'use strict';\n\nconsole.log('Libs and App loaded !');","/**\n * Create App object\n *\n */\n\nvar App = {};\n\n(function () {\n\n    App.goto = function (identifier, gotoUp) {\n        var current = $('section.visible'),\n            next = $('.page.' + identifier),\n            direction = gotoUp ? 'up' : 'down';\n\n        if (!next || typeof gotoUp !== 'boolean') {\n            throw new Error('Wrong arguments: ' + next + ', ' + gotoUp);\n        } else if (current == next) {\n            throw new Error('Moving to the same page..');\n        } else {\n            if (current) {\n                var currentName = current.getAttribute('data-page');\n                App.call(currentName, 'unloading');\n                current.classList.remove('visible');\n                current.classList.add('exit-' + direction);\n                current.addEventListener('animationend', function animationend(e) {\n                    App.call(currentName, 'unloaded');\n                    current.removeEventListener('animationend', animationend);\n                    current.classList.remove('exit-' + direction);\n                });\n            }\n            App.call(identifier, 'loading');\n            next.classList.add('visible');\n            next.classList.add('enter-' + direction);\n            next.addEventListener('animationend', function animationend(e) {\n                App.call(identifier, 'loaded');\n                next.removeEventListener('animationend', animationend);\n                next.classList.remove('enter-' + direction);\n                App.setLocation(identifier);\n            });\n        }\n    };\n\n    App.home = function () {\n        // Rerun the page to restart the canvas\n        window.location.reload();\n    };\n\n    var isChangingHash = false;\n\n    App.setLocation = function (hash) {\n        isChangingHash = true;\n        window.location.hash = '#/' + hash;\n        setTimeout(function () {\n            isChangingHash = false;\n        }, 1);\n    };\n\n    App.gotoHash = function (homeFallback) {\n        if (isChangingHash) return;\n        if (window.location.hash && window.location.hash.length > 2) {\n            var hash = window.location.hash.substring(2),\n                page = $('.page.' + hash);\n\n            if (hash === 'home') {\n                App.home();\n                return;\n            } else if (page && page.classList.contains('page')) {\n                var current = $('section.visible');\n                if (current) {\n                    current.classList.remove('visible');\n                    var currentName = current.getAttribute('data-page');\n                    App.call(currentName, 'unloading');\n                    App.call(currentName, 'unloaded');\n                }\n                page.classList.add('visible');\n                App.call(hash, 'loading');\n                App.call(hash, 'loaded');\n                window.HYPERSPACE = false;\n                return;\n            }\n        }\n        if (homeFallback) {\n            App.home();\n        }\n    };\n\n    var callbacks = {};\n    \n    App.call = function (page, state) {\n        if (callbacks[page] && callbacks[page][state]) {\n            for (var i = callbacks[page][state].length - 1; i >= 0; i--) {\n                callbacks[page][state][i]();\n            }\n        }\n    };\n\n    App.bind = function (page, state, callback) {\n        if (!callbacks[page]) {\n            callbacks[page] = {};\n        }\n        if (!callbacks[page][state]) {\n            callbacks[page][state] = [];\n        }\n        callbacks[page][state].push(callback);\n    };\n\n})();\n\n","\nwindow.AudioContext = (function() {\n    return  window.AudioContext || window.webkitAudioContext || window.mozAudioContext;\n})();\n","/* Compatible avec tous les navigateurs */\n(function() {\n    var lastTime = 0;\n    var vendors = ['webkit', 'moz'];\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];\n        window.cancelAnimationFrame =\n          window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame)\n        window.requestAnimationFrame = function(callback, element) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n              timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n\n    if (!window.cancelAnimationFrame)\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n}());\n","\nvar $ = document.querySelector.bind(document),\n    $$ = document.querySelectorAll.bind(document);\n","\n(function () {\n\n    var episodeIsPlaying = false;\n\n    var canvas = $('.episode-1 .drawing canvas');\n\n    if (!canvas || !canvas.getContext) return;\n\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n    var context = canvas.getContext('2d'),\n        width = canvas.width,\n        height = canvas.height;\n\n    var frequency = 40,\n        angleCount = 30;\n\n    // Tutorial from: http://apprentice.craic.com/tutorials/30\n\n    var audioContext;\n    var audioBuffer;\n    var sourceNode;\n    var analyserNode;\n    var javascriptNode;\n    var audioData = null;\n    var audioPlaying = false;\n    var sampleSize = 1024;\n    var amplitudeArray;\n    var audioUrl = 'audio/episode1.mp3';\n    var middleWidth = ~~(width / 2);\n    var middleHeight = ~~(height / 2);\n    var lastDraw = 0;\n\n    var setupAudioNodes = function () {\n        sourceNode     = audioContext.createBufferSource();\n        analyserNode   = audioContext.createAnalyser();\n        javascriptNode = audioContext.createScriptProcessor(sampleSize, 1, 1);\n        // Create the array for the data values\n        amplitudeArray = new Uint8Array(analyserNode.frequencyBinCount);\n        // Now connect the nodes together\n        sourceNode.connect(audioContext.destination);\n        sourceNode.connect(analyserNode);\n        analyserNode.connect(javascriptNode);\n        javascriptNode.connect(audioContext.destination);\n    };\n\n    // Load the audio from the URL via Ajax and store it in global variable audioData\n    // Note that the audio load is asynchronous\n    var loadSound = function (url) {\n        var request = new XMLHttpRequest();\n        request.open('GET', url, true);\n        request.responseType = 'arraybuffer';\n        // When loaded, decode the data and play the sound\n        request.onload = function () {\n            audioContext.decodeAudioData(request.response, function (buffer) {\n                audioData = buffer;\n                playSound(audioData);\n            }, onError);\n        };\n        request.send();\n    };\n\n    // Play the audio and loop until stopped\n    var playSound = function (buffer) {\n        sourceNode.buffer = buffer;\n        // sourceNode.start();    // Play the sound now\n        sourceNode.start(0, 38);\n        sourceNode.loop = true;\n        audioPlaying = true;\n    };\n\n    var onError = function (e) {\n        console.warn(e);\n    };\n\n    context.strokeStyle = 'white';\n    context.shadowBlur = 100;\n    context.shadowColor = 'rgb(220, 20, 220)';\n    // context.shadowColor = 'blue';\n\n    var drawSoung = function() {\n        if (episodeIsPlaying) {\n            clearCanvas();\n            context.lineWidth = ~~(4 + Math.random() * 8);\n\n            var k, i, value = 0;\n            var amplitudeLength = amplitudeArray.length;\n            var countOffset = ~~(amplitudeLength / angleCount);\n            var drawOffset = ~~(width / angleCount);\n\n            context.beginPath();\n            context.moveTo(0, middleHeight);\n            k = 0;\n            for (i = countOffset; i < amplitudeLength - countOffset; i += countOffset) {\n                k++;\n                value = height - (height * amplitudeArray[i] / 256) - 1;\n                context.lineTo(k * drawOffset, value);\n\n            }\n            context.lineTo(width, middleHeight);\n            context.stroke();\n\n            context.beginPath();\n            context.moveTo(0, middleHeight);\n            k = 0;\n            for (i = amplitudeLength - countOffset; i >= countOffset; i -= countOffset) {\n                k++;\n                value = height - (height * amplitudeArray[i] / 256) - 1;\n                context.lineTo(k * drawOffset, value);\n\n            }\n            context.lineTo(width, middleHeight);\n            context.stroke();\n\n            context.beginPath();\n            context.moveTo(0, middleHeight);\n            k = 0;\n            for (i = amplitudeLength - countOffset; i >= countOffset; i -= countOffset) {\n                k++;\n                context.lineTo(k * drawOffset, Math.random() * 50 - 25 + middleHeight);\n\n            }\n            context.lineTo(width, middleHeight);\n            context.stroke();\n            \n            // episodeIsPlaying = false;\n            \n            // var length = amplitudeArray.length * 0.95,\n                // start = ~~(length * 0.05);\n            // context.beginPath();\n            // var value, i, y;\n            // context.moveTo(0, middleHeight);\n            // for (i = start; i < length; i += 60) {\n                // i = ~~i;\n                // value = amplitudeArray[i] / 256;\n                // y = height - (height * value) - 1;\n                // context.lineTo(i - start, y);\n            // }\n            // context.lineTo(width, middleHeight);\n            // context.stroke();\n        }\n    };\n\n    var clearCanvas = function () {\n        context.clearRect(0, 0, width, height);\n    };\n\n    try {\n        audioContext = new AudioContext();\n    } catch (ex) {\n        console.warn('Web Audio API is not supported in this browser');\n    }\n\n\n    App.bind('episode-1', 'loaded', function (e) {\n        episodeIsPlaying = true;\n\n        setupAudioNodes();\n\n        // setup the event handler that is triggered every time enough samples have been collected\n        // trigger the audio analysis and draw the results\n        javascriptNode.addEventListener('audioprocess', function (e) {\n            var now = new Date().getTime();\n            if (lastDraw > now - frequency) return;\n            lastDraw = now;\n            // get the Time Domain data for this sample\n            analyserNode.getByteTimeDomainData(amplitudeArray);\n            // analyserNode.getByteFrequencyData(amplitudeArray);\n\n            // draw the display if the audio is playing\n            if (audioPlaying === true) {\n                window.requestAnimationFrame(drawSoung);\n            }\n        });\n\n        // Load the Audio the first time through, otherwise play it from the buffer\n        if (audioData === null) {\n            loadSound(audioUrl);\n        } else {\n            playSound(audioData);\n        }\n\n    });\n\n    App.bind('episode-1', 'unloading', function () {\n        episodeIsPlaying = false;\n        sourceNode.stop(0);\n        clearCanvas();\n        audioPlaying = false;\n    });\n\n})();\n","\n(function () {\n\n    var GLOBAL_SPEED = 0.1,\n        HYPERSPACE_RUN = true;\n\n    App.bind('home', 'unloading', function () {\n        var interval = setInterval(function () {\n            GLOBAL_SPEED = (GLOBAL_SPEED + 0.1) * 1.3;\n            if (GLOBAL_SPEED > 70) {\n                clearInterval(interval);\n            }\n        }, 100);\n\n        var home = $('.page.home'),\n            select = $('.page.select');\n\n        // select.addEventListener('animationend', function begin(e) { \n        //     select.removeEventListener('animationend', begin);\n        // });\n\n        home.classList.add('exit-hyperspace');\n        select.classList.add('enter-hyperspace');\n    });\n\n    App.bind('home', 'unloaded', function () {\n        HYPERSPACE_RUN = false;\n\n        var home = $('.page.home'),\n            select = $('.page.select');\n\n        home.classList.remove('visible');\n        home.classList.remove('exit-hyperspace');\n        select.classList.remove('enter-hyperspace');\n    });\n\n    (function (canvas) {\n\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n\n        if (canvas.getContext) {\n            var context = canvas.getContext('2d'),\n                width = canvas.width,\n                height = canvas.height,\n                starsCount = 100,\n                centerRadius = 100,\n                length = 10,\n                stars = [];\n\n            var createStar = function () {\n                var randomX = Math.random(),\n                    randomY = Math.random(),\n                    color = ~~(Math.random() * 80 + 20);\n\n                return {\n                    x: randomX * width,\n                    y: randomY * height,\n                    xs: (randomX * width - width/2) / 500,\n                    ys: (randomY * height - height/2) / 500,\n                    size: ~~(color / 20),\n                    length: Math.random() * length,\n                    color: 'rgb(' + color + ', ' + color + ', ' + ~~(color + Math.random() * 20) + ')'\n                };\n            };\n\n            for (var i = 0; i < starsCount; i++) {\n                stars.push(createStar());\n            }\n\n            (function loop() {\n                if (HYPERSPACE_RUN) {\n\n                    window.requestAnimationFrame(loop);\n                    context.clearRect(0, 0, width, height);\n\n                    for (var i = 0; i < starsCount; i++) {\n                        var s = stars[i];\n                        if (s.x < 0 || s.y < 0 || s.x > width || s.y > height) {\n                            s = stars[i] = createStar();\n                        }\n                        context.strokeStyle = s.color;\n                        context.lineWidth = s.size;\n                        context.shadowBlur = 5;\n                        context.lineCap = 'round';\n                        context.shadowColor = \"#555\";\n                        context.beginPath();\n                        context.moveTo(s.x, s.y);\n                        context.lineTo(s.x + 0.1 + s.length * s.xs * GLOBAL_SPEED, s.y + s.length * s.ys * GLOBAL_SPEED);\n                        context.stroke();\n                        s.x += s.xs * GLOBAL_SPEED;\n                        s.y += s.ys * GLOBAL_SPEED;\n                    }\n                }\n            })();\n        }\n\n    })($('.hyperspace'));\n\n})();","/**\n * Navigation between pages\n *\n */\n\n// Bind begin button to hyperspace animation\n$('.begin').addEventListener('click', function (e) {\n    App.call('home', 'unloading');\n    App.call('select', 'loading');\n    var select = $('.page.select');\n    select.addEventListener('animationend', function begin(e) { \n        select.removeEventListener('animationend', begin);\n        App.call('home', 'unloaded');\n        App.call('select', 'loaded');\n        $('.page.select').classList.add('visible');\n        App.setLocation('select');\n    });\n});\n\n// Bind navigation elements to animations\nvar bindNavigation = function (element) {\n    element.addEventListener('click', function (e) {\n        App.goto(this.getAttribute('data-target'), this.getAttribute('data-direction') === 'up');\n        e.preventDefault();\n    });\n};\n\nvar elements = $$('.navigation');\nfor (var i = elements.length - 1; i >= 0; i--) {\n    bindNavigation(elements[i]);\n}\n\n// Change page if hash change\nwindow.addEventListener('hashchange', App.gotoHash);\n\n// If a hash is already set\nApp.gotoHash(false);\n","\n(function () {\n\n    var select = {\n        lastMove: 0,\n        leftOffset: window.screen.width / 2 - 100,\n        rightOffset: 0,\n        screenScale: (100 - 100 / 1.75),\n        selectCards: $('.select .cards')\n    };\n\n    select.percentDivisor = window.screen.width - select.rightOffset - select.leftOffset;\n\n    var toggleSelectionListener = function(event) {\n        var now = new Date().getTime();\n        if (select.lastMove < now - 20) {\n\n            select.lastMove = now;\n            var percent = (event.screenX - select.leftOffset) / select.percentDivisor;\n            \n            if (percent < 0) {\n                percent = 0;\n            } else if (percent > 1) {\n                percent = 1;\n            }\n\n            select.selectCards.style.transform = 'translateZ(0) translateX(-' + percent * select.screenScale + '%)';\n        }\n    };\n\n    App.bind('select', 'loading', function () {\n        document.addEventListener('mousemove', toggleSelectionListener);\n    });\n\n    App.bind('select', 'unloading', function () {\n        document.removeEventListener('mousemove', toggleSelectionListener);\n    });\n\n})();\n","\n(function () {\n\n    var buttons = $$('.button-vote');\n    var bindVote = function (elt) {\n        elt.addEventListener('click', function (e) {\n            for (var i = buttons.length - 1; i >= 0; i--) {\n                buttons[i].innerHTML = \"Je vote\";\n            }\n            elt.innerHTML = \"Vote validé !\";\n        });\n    };\n\n    for (var i = buttons.length - 1; i >= 0; i--) {\n        bindVote(buttons[i]);\n    }\n\n})();\n","\nconsole.log('Libs and App loaded !');\n"],"sourceRoot":"/source/"}